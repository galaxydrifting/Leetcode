# 4. Median of Two Sorted Arrays

> é›£åº¦ï¼šHard ğŸ”´

> é¡Œå‹ï¼šArray & Binary Search

## é¡Œç›®æè¿°
> çµ¦å®šå…©å€‹å·²æ’åºçš„é™£åˆ— nums1 å’Œ nums2ï¼Œåˆ†åˆ¥é•·åº¦ç‚º m å’Œ nï¼Œè«‹ä½ æ‰¾å‡ºé€™å…©å€‹å·²æ’åºé™£åˆ—çš„ä¸­ä½æ•¸ã€‚è¦æ±‚æ¼”ç®—æ³•çš„æ™‚é–“è¤‡é›œåº¦ç‚º O(log (m+n))ã€‚

> Given two sorted arrays nums1 and nums2 of size m and n respectively, return the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).

---

## ğŸ’¡ è§£é¡Œæ€è·¯
1. ç”±æ–¼å…©å€‹é™£åˆ—çš†å·²æ’åºï¼Œå¯åˆ©ç”¨äºŒåˆ†æœå°‹æ³•ï¼ˆBinary Searchï¼‰ä¾†é”åˆ° O(log(min(m, n))) çš„æ™‚é–“è¤‡é›œåº¦ã€‚
2. å…ˆç¢ºä¿ nums1 é•·åº¦è¼ƒçŸ­ï¼Œå°è¼ƒçŸ­çš„é™£åˆ—é€²è¡ŒäºŒåˆ†æœå°‹ã€‚
3. è¨­å®šåˆ†å‰²é» iï¼ˆnums1ï¼‰èˆ‡ jï¼ˆnums2ï¼‰ï¼Œä½¿å¾—å·¦åŠéƒ¨å…ƒç´ å€‹æ•¸ç­‰æ–¼å³åŠéƒ¨ã€‚
4. æª¢æŸ¥åˆ†å‰²é»æ˜¯å¦æ»¿è¶³æ¢ä»¶ï¼šnums1[i-1] <= nums2[j] ä¸” nums2[j-1] <= nums1[i]ã€‚
5. è‹¥ä¸æ»¿è¶³ï¼Œèª¿æ•´åˆ†å‰²é»ç¹¼çºŒäºŒåˆ†æœå°‹ã€‚
6. æ‰¾åˆ°æ­£ç¢ºåˆ†å‰²å¾Œï¼Œæ ¹æ“šç¸½é•·åº¦å¥‡å¶æ±ºå®šä¸­ä½æ•¸ã€‚

> âš ï¸ æ³¨æ„ï¼šéœ€è™•ç†é‚Šç•Œæƒ…æ³ï¼ˆå¦‚åˆ†å‰²é»åœ¨é™£åˆ—é–‹é ­æˆ–çµå°¾ï¼‰ã€‚

---

## ğŸ“š ç¯„ä¾‹

| è¼¸å…¥                | è¼¸å‡º |
|---------------------|------|
| nums1 = [1,3], nums2 = [2] | 2.0  |
| nums1 = [1,2], nums2 = [3,4] | 2.5  |

---

## ğŸ” æ¼”ç®—æ³•èˆ‡è³‡æ–™çµæ§‹åˆ†æ

| é …ç›®         | èªªæ˜                                  |
|--------------|---------------------------------------|
| ä½¿ç”¨è³‡æ–™çµæ§‹ | é™£åˆ—ã€äºŒåˆ†æœå°‹                        |
| æ™‚é–“è¤‡é›œåº¦   | O(log(min(m, n)))                     |
| ç©ºé–“è¤‡é›œåº¦   | O(1)                                  |
| å„ªé»         | æ™‚é–“è¤‡é›œåº¦ä½ï¼Œé©åˆå¤§æ•¸æ“š               |
| ç¼ºé»         | é‚è¼¯è¼ƒè¤‡é›œï¼Œéœ€è™•ç†å¤šç¨®é‚Šç•Œæƒ…æ³         |

---

## âš¡ ç¨‹å¼ç¢¼å¯¦ä½œï¼ˆPythonï¼‰

```python
# æ±‚å…©å€‹å·²æ’åºé™£åˆ—çš„ä¸­ä½æ•¸
from typing import List

def findMedianSortedArrays(nums1: List[int], nums2: List[int]) -> float:
    # å°‡ nums1, nums2 æŒ‡æ´¾çµ¦ A, B
    A, B = nums1, nums2  # A, B åˆ†åˆ¥æŒ‡å‘å…©å€‹è¼¸å…¥é™£åˆ—
    # è¨ˆç®—å…©é™£åˆ—ç¸½é•·åº¦
    total = len(A) + len(B)  # å…©é™£åˆ—ç¸½é•·åº¦
    # è¨ˆç®—å·¦åŠéƒ¨å…ƒç´ å€‹æ•¸
    half = total // 2  # å·¦åŠéƒ¨å…ƒç´ å€‹æ•¸
    # è‹¥ B è¼ƒçŸ­å‰‡äº¤æ›ï¼Œç¢ºä¿ A ç‚ºè¼ƒçŸ­é™£åˆ—
    if len(B) < len(A):  # è‹¥ B è¼ƒçŸ­å‰‡äº¤æ›
        A, B = B, A
    # è¨­å®šäºŒåˆ†æœå°‹ç¯„åœ
    l, r = 0, len(A) - 1  # l, r ç‚º A çš„æœå°‹ç¯„åœ
    while True:
        # A çš„åˆ†å‰²é»
        i = (l + r) // 2  # A çš„åˆ†å‰²é»
        # B çš„åˆ†å‰²é»ï¼Œç¢ºä¿å·¦åŠéƒ¨å…ƒç´ æ•¸é‡æ­£ç¢º
        j = half - i - 2  # B çš„åˆ†å‰²é»

        # å–å¾—åˆ†å‰²é»å·¦å³çš„å€¼ï¼Œè‹¥è¶Šç•Œå‰‡ç”¨ç„¡çª®å¤§/å°è™•ç†
        Aleft = A[i] if i >= 0 else float('-inf')  # A å·¦åŠæœ€å¤§å€¼
        Aright = A[i + 1] if (i + 1) < len(A) else float('inf')  # A å³åŠæœ€å°å€¼
        Bleft = B[j] if j >= 0 else float('-inf')  # B å·¦åŠæœ€å¤§å€¼
        Bright = B[j + 1] if (j + 1) < len(B) else float('inf')  # B å³åŠæœ€å°å€¼
        
        # æª¢æŸ¥åˆ†å‰²æ˜¯å¦æ­£ç¢º
        if Aleft <= Bright and Bleft <= Aright:  # åˆ†å‰²æ­£ç¢º
            if total % 2:  # è‹¥ç¸½é•·åº¦ç‚ºå¥‡æ•¸
                return min(Aright, Bright)  # å›å‚³å³åŠæœ€å°å€¼
            # å¦å‰‡å›å‚³å·¦åŠæœ€å¤§å€¼èˆ‡å³åŠæœ€å°å€¼å¹³å‡
            return (max(Aleft, Bleft) + min(Aright, Bright)) / 2
        elif Aleft > Bright:  # Aleft å¤ªå¤§ï¼Œi å¤ªå¤§
            r = i - 1  # å¾€å·¦ç¸®å°ç¯„åœ
        else:  # Aleft å¤ªå°ï¼Œi å¤ªå°
            l = i + 1  # å¾€å³æ“´å¤§ç¯„åœ

if __name__ == "__main__":
    # ç¯„ä¾‹æ¸¬è©¦
    nums1 = [1, 3]  # æ¸¬è©¦è³‡æ–™1
    nums2 = [2]     # æ¸¬è©¦è³‡æ–™2
    print(findMedianSortedArrays(nums1, nums2))  # é æœŸè¼¸å‡ºï¼š2.0
    nums1 = [1, 2]  # æ¸¬è©¦è³‡æ–™3
    nums2 = [3, 4]  # æ¸¬è©¦è³‡æ–™4
    print(findMedianSortedArrays(nums1, nums2))  # é æœŸè¼¸å‡ºï¼š2.5
```
