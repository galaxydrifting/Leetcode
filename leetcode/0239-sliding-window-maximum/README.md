# 239. Sliding Window Maximum

> é›£åº¦ï¼šHard ğŸ”´

## é¡Œç›®æè¿°
> çµ¦å®šä¸€å€‹æ•´æ•¸é™£åˆ— numsï¼Œä»¥åŠä¸€å€‹å¤§å°ç‚º k çš„æ»‘å‹•è¦–çª—ï¼Œè¦–çª—æœƒå¾é™£åˆ—æœ€å·¦å´ç§»å‹•åˆ°æœ€å³å´ã€‚æ¯æ¬¡ç§»å‹•æ™‚ï¼Œä½ åªèƒ½çœ‹åˆ°è¦–çª—å…§çš„ k å€‹æ•¸å­—ã€‚è«‹å›å‚³æ¯æ¬¡è¦–çª—ç§»å‹•æ™‚çš„æœ€å¤§å€¼ã€‚

> You are given an array of integers nums, there is a sliding window of size k which is moving from the very left of the array to the very right. You can only see the k numbers in the window. Each time the sliding window moves right by one position. Return the max sliding window.

---

> é¡Œå‹ï¼šSliding Window & Monotonic Queue

---

## ğŸ’¡ è§£é¡Œæ€è·¯
1. ä½¿ç”¨é›™ç«¯ä½‡åˆ—ï¼ˆdequeï¼‰ä¾†ç¶­è­·ä¸€å€‹å–®èª¿éæ¸›çš„ç´¢å¼•éšŠåˆ—ã€‚
2. æ¯æ¬¡æ–°å…ƒç´ é€²å…¥æ™‚ï¼Œå°‡éšŠå°¾å°æ–¼æ–°å…ƒç´ çš„ç´¢å¼•å…¨éƒ¨ç§»é™¤ï¼Œç¢ºä¿éšŠåˆ—å–®èª¿éæ¸›ã€‚
3. è‹¥éšŠé¦–ç´¢å¼•å·²ç¶“æ»‘å‡ºè¦–çª—ç¯„åœï¼Œå‰‡å°‡å…¶ç§»é™¤ã€‚
4. ç•¶è¦–çª—é•·åº¦é”åˆ° k æ™‚ï¼Œå°‡éšŠé¦–å°æ‡‰çš„å…ƒç´ ï¼ˆå³ç•¶å‰æœ€å¤§å€¼ï¼‰åŠ å…¥çµæœã€‚

> âš ï¸ é›™ç«¯ä½‡åˆ—å¯åœ¨ O(1) æ™‚é–“å…§å–å¾—æœ€å¤§å€¼ï¼Œç¢ºä¿æ•´é«”æ™‚é–“è¤‡é›œåº¦ç‚º O(n)ã€‚

---

## ğŸ“š ç¯„ä¾‹

| è¼¸å…¥                | è¼¸å‡º      |
|---------------------|-----------|
| nums = [1,3,-1,-3,5,3,6,7], k = 3 | [3,3,5,5,6,7] |
| nums = [1], k = 1   | [1]       |

---

## ğŸ” æ¼”ç®—æ³•èˆ‡è³‡æ–™çµæ§‹åˆ†æ

| é …ç›®         | èªªæ˜                        |
|--------------|-----------------------------|
| ä½¿ç”¨è³‡æ–™çµæ§‹ | é›™ç«¯ä½‡åˆ—ï¼ˆdequeï¼‰           |
| æ™‚é–“è¤‡é›œåº¦   | O(n)                        |
| ç©ºé–“è¤‡é›œåº¦   | O(k)                        |
| å„ªé»         | å¯é«˜æ•ˆå–å¾—è¦–çª—æœ€å¤§å€¼         |
| ç¼ºé»         | éœ€é¡å¤–ç©ºé–“ç¶­è­·ä½‡åˆ—           |

---

## âš¡ ç¨‹å¼ç¢¼å¯¦ä½œï¼ˆPythonï¼‰

```python
from typing import List
import collections  # åŒ¯å…¥ collections æ¨¡çµ„ä»¥ä½¿ç”¨ deque

class Solution:
    def maxSlidingWindow(self, nums: List[int], k: int) -> List[int]:
        output = []  # å„²å­˜æ¯å€‹è¦–çª—çš„æœ€å¤§å€¼
        q = collections.deque()  # ç”¨ä¾†å­˜æ”¾ç´¢å¼•ï¼Œç¶­æŒå–®èª¿éæ¸›
        l = r = 0  # l: å·¦æŒ‡æ¨™, r: å³æŒ‡æ¨™

        while r < len(nums):
            # ç§»é™¤éšŠå°¾å°æ–¼ç•¶å‰å…ƒç´ çš„ç´¢å¼•ï¼Œç¢ºä¿éšŠåˆ—å–®èª¿éæ¸›
            while q and nums[q[-1]] < nums[r]:
                q.pop()
            q.append(r)

            # ç§»é™¤å·²æ»‘å‡ºè¦–çª—çš„éšŠé¦–ç´¢å¼•
            if l > q[0]:
                q.popleft()

            # ç•¶è¦–çª—é•·åº¦é”åˆ° k æ™‚ï¼Œå°‡æœ€å¤§å€¼åŠ å…¥çµæœ
            if (r + 1) >= k:
                output.append(nums[q[0]])
                l += 1  # å·¦æŒ‡æ¨™å³ç§»ï¼Œç¸®å°è¦–çª—
            r += 1  # å³æŒ‡æ¨™å³ç§»ï¼Œæ“´å¤§è¦–çª—

        return output

if __name__ == "__main__":
    # ç¯„ä¾‹æ¸¬è©¦
    nums = [1,3,-1,-3,5,3,6,7]
    k = 3
    print(Solution().maxSlidingWindow(nums, k))  # è¼¸å‡º: [3,3,5,5,6,7]
    nums2 = [1]
    k2 = 1
    print(Solution().maxSlidingWindow(nums2, k2))  # è¼¸å‡º: [1]
```
