# 84. Largest Rectangle in Histogram

> é›£åº¦ï¼šHard ğŸ”´

> é¡Œå‹ï¼šStack & Monotonic Stack

## é¡Œç›®æè¿°
> çµ¦å®šä¸€å€‹æ•´æ•¸é™£åˆ— heightsï¼Œä»£è¡¨ç›´æ–¹åœ–ä¸­æ¯å€‹æŸ±å­çš„é«˜åº¦ï¼Œæ¯å€‹æŸ±å­çš„å¯¬åº¦ç‚º 1ï¼Œè«‹å›å‚³ç›´æ–¹åœ–ä¸­èƒ½å¤ å½¢æˆçš„æœ€å¤§çŸ©å½¢é¢ç©ã€‚

> Given an array of integers heights representing the histogram's bar height where the width of each bar is 1, return the area of the largest rectangle in the histogram.

---

## ğŸ’¡ è§£é¡Œæ€è·¯
1. ä½¿ç”¨å–®èª¿éå¢å †ç–Šï¼ˆMonotonic Stackï¼‰ä¾†è¿½è¹¤æŸ±å­çš„ç´¢å¼•ã€‚
2. ç•¶é‡åˆ°æ¯”å †ç–Šé ‚ç«¯æŸ±å­çŸ®çš„æŸ±å­æ™‚ï¼Œé–‹å§‹è¨ˆç®—ä»¥å †ç–Šé ‚ç«¯æŸ±å­ç‚ºé«˜çš„æœ€å¤§çŸ©å½¢é¢ç©ã€‚
3. æŒçºŒå½ˆå‡ºå †ç–Šä¸¦è¨ˆç®—é¢ç©ï¼Œç›´åˆ°å †ç–Šç‚ºç©ºæˆ–é‡åˆ°æ›´çŸ®çš„æŸ±å­ã€‚
4. æœ€å¾Œå°‡å‰©é¤˜æŸ±å­ä¹Ÿä¸€ä½µè¨ˆç®—ã€‚

> âš ï¸ è¨˜å¾—åœ¨ heights å¾Œé¢è£œä¸Šä¸€å€‹ 0ï¼Œç¢ºä¿æ‰€æœ‰æŸ±å­éƒ½èƒ½è¢«æ­£ç¢ºè¨ˆç®—ã€‚

---

## ğŸ“š ç¯„ä¾‹

| è¼¸å…¥           | è¼¸å‡º |
|----------------|------|
| [2,1,5,6,2,3]  | 10   |
| [2,4]          | 4    |

---

## ğŸ” æ¼”ç®—æ³•èˆ‡è³‡æ–™çµæ§‹åˆ†æ

| é …ç›®         | èªªæ˜                        |
|--------------|-----------------------------|
| ä½¿ç”¨è³‡æ–™çµæ§‹ | å–®èª¿å †ç–Šï¼ˆMonotonic Stackï¼‰ |
| æ™‚é–“è¤‡é›œåº¦   | O(n)                        |
| ç©ºé–“è¤‡é›œåº¦   | O(n)                        |
| å„ªé»         | é«˜æ•ˆè™•ç†æ‰€æœ‰æŸ±å­çš„æƒ…å¢ƒ      |
| ç¼ºé»         | éœ€é¡å¤–å †ç–Šç©ºé–“              |

---

## âš¡ ç¨‹å¼ç¢¼å¯¦ä½œï¼ˆPythonï¼‰

```python
# ä½¿ç”¨å–®èª¿å †ç–Šæ±‚è§£æœ€å¤§çŸ©å½¢é¢ç©
class Solution:
    def largestRectangleArea(self, heights):
        heights.append(0)  # åœ¨ heights å¾Œè£œ 0ï¼Œç¢ºä¿æ‰€æœ‰æŸ±å­éƒ½èƒ½è¢«è¨ˆç®—
        stack = []  # åˆå§‹åŒ–å †ç–Šï¼Œå­˜æ”¾æŸ±å­çš„ç´¢å¼•
        max_area = 0  # æœ€å¤§é¢ç©åˆå§‹ç‚º 0
        for i, h in enumerate(heights):  # éæ­·æ¯å€‹æŸ±å­
            # ç•¶å †ç–Šä¸ç‚ºç©ºä¸”ç•¶å‰é«˜åº¦å°æ–¼å †ç–Šé ‚ç«¯é«˜åº¦æ™‚
            while stack and heights[stack[-1]] > h:
                height = heights[stack.pop()]  # å–å‡ºå †ç–Šé ‚ç«¯çš„é«˜åº¦
                # å¦‚æœå †ç–Šç‚ºç©ºï¼Œå¯¬åº¦å°±æ˜¯ iï¼Œå¦å‰‡æ˜¯ i - stack[-1] - 1
                width = i if not stack else i - stack[-1] - 1
                area = height * width  # è¨ˆç®—é¢ç©
                max_area = max(max_area, area)  # æ›´æ–°æœ€å¤§é¢ç©
            stack.append(i)  # å°‡ç•¶å‰ç´¢å¼•åŠ å…¥å †ç–Š
        return max_area  # å›å‚³æœ€å¤§é¢ç©
```
